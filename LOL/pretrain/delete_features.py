import os

# ✅ 將 QID 列表直接貼在這裡（複製你剛剛的那段即可）
qid_block = """
W2D2_1_0.0_150.0_150.0_151.0
W2D2_1_1350.0_1500.0_150.0_151.0
W2D2_1_1500.0_1650.0_150.0_151.0
W2D2_1_1650.0_1800.0_150.0_151.0
W2D2_1_1800.0_1950.0_150.0_151.0
W2D2_2_1050.0_1200.0_150.0_151.0
W2D2_2_1200.0_1350.0_150.0_151.0
W2D2_2_1350.0_1500.0_150.0_151.0
W2D2_2_1500.0_1650.0_150.0_151.0
W2D2_2_1650.0_1800.0_150.0_151.0
W2D2_2_900.0_1050.0_150.0_151.0
W2D2_3_0.0_150.0_150.0_151.0
W2D2_3_1200.0_1350.0_150.0_151.0
W2D2_3_1350.0_1500.0_150.0_151.0
W2D2_3_1500.0_1650.0_150.0_151.0
W2D2_3_1650.0_1800.0_150.0_151.0
W2D2_3_1800.0_1950.0_150.0_151.0
W2D2_3_1950.0_2100.0_150.0_151.0
W2D2_5_1050.0_1200.0_150.0_151.0
W2D2_5_1200.0_1350.0_150.0_151.0
W2D2_5_1350.0_1500.0_150.0_151.0
W2D2_5_1500.0_1650.0_150.0_151.0
W2D2_5_1650.0_1800.0_150.0_151.0
W2D2_5_900.0_1050.0_150.0_151.0
W2D3_1_1350.0_1500.0_150.0_151.0
W2D3_1_1500.0_1650.0_150.0_151.0
W2D3_1_1650.0_1800.0_150.0_151.0
W2D3_2_1500.0_1650.0_150.0_151.0
W2D3_2_1650.0_1800.0_150.0_151.0
W2D3_3_0.0_150.0_150.0_151.0
W2D3_3_1500.0_1650.0_150.0_151.0
W2D3_3_450.0_600.0_150.0_151.0
W2D3_4_0.0_150.0_150.0_151.0
W2D3_4_1500.0_1650.0_150.0_151.0
W2D3_5_1650.0_1800.0_150.0_151.0
W2D2_4_0.0_150.0_150.0_151.0
W2D2_4_150.0_300.0_150.0_151.0
W2D2_4_2100.0_2250.0_150.0_151.0
W2D2_4_2250.0_2400.0_150.0_151.0
W2D2_4_300.0_450.0_150.0_151.0
W2D2_4_450.0_600.0_150.0_151.0
"""

# ✅ 轉成 qid list
bad_qids = [f"qid{line.strip()}" for line in qid_block.strip().split("\n") if line.strip()]

# ✅ 指定 feature 資料夾
feature_dirs = [
    "LOL/pretrain/blip_query_features",
    "LOL/pretrain/clip_query_features",
]

# ✅ 支援副檔名
valid_exts = [".npz", ".pt", ".pkl", ".bin"]

deleted_files = []

for feature_dir in feature_dirs:
    for qid in bad_qids:
        for ext in valid_exts:
            fpath = os.path.join(feature_dir, f"{qid}{ext}")
            if os.path.exists(fpath):
                os.remove(fpath)
                deleted_files.append(fpath)

# ✅ 顯示結果
print(f"\n✅ 已刪除 {len(deleted_files)} 個檔案：")
for f in deleted_files:
    print(f)
